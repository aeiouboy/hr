generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Document {
  id           String   @id @default(uuid())
  employee_id  String
  type         String
  title        String
  file_path    String
  file_size    Int      @default(0)
  mime_type    String   @default("text/html")
  period       String?
  status       String   @default("active")
  generated_by String
  created_at   DateTime @default(now())
  updated_at   DateTime @updatedAt

  downloads DocumentDownload[]

  @@map("documents")
}

model DocumentDownload {
  id            String   @id @default(uuid())
  document_id   String
  document      Document @relation(fields: [document_id], references: [id], onDelete: Cascade)
  downloaded_by String
  downloaded_at DateTime @default(now())
  ip_address    String?

  @@map("document_downloads")
}

model AuditLog {
  id           String   @id @default(uuid())
  entity_type  String
  entity_id    String?
  action       String
  performed_by String
  changes      Json?
  changed_at   DateTime @default(now())

  @@map("audit_logs")
}
