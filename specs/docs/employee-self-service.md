# Employee Self-Service (การบริการตนเองของพนักงาน)

เอกสารนี้อธิบาย module ที่พนักงานใช้จัดการข้อมูลส่วนตัวและดูข้อมูลของตัวเอง

---

## โปรไฟล์พนักงาน (`profile`)

**หน้าที่หลัก:** เป็นหน้าหลักที่รวบรวมข้อมูลทั้งหมดของพนักงานไว้ในที่เดียว โดยแบ่งออกเป็น 6 แท็บ ได้แก่ ข้อมูลส่วนตัว, ข้อมูลการจ้างงาน, ค่าตอบแทน, สวัสดิการ, โปรไฟล์, และสกอร์การ์ด

**ใครใช้ได้บ้าง:** พนักงาน (ดูข้อมูลตัวเอง), ผู้จัดการ (ดูข้อมูลสมาชิกในทีม), เจ้าหน้าที่ HR, ผู้จัดการ HR

**สิ่งที่ทำได้:**
- สลับดูข้อมูลในแต่ละแท็บ (ข้อมูลส่วนตัว, การจ้างงาน, ค่าตอบแทน, สวัสดิการ, โปรไฟล์, สกอร์การ์ด)
- นำทางไปยังแท็บที่ต้องการโดยตรงผ่าน URL

**ข้อมูลที่แสดง:**
- ส่วนหัวโปรไฟล์ที่แสดงชื่อและรูปภาพของพนักงาน
- เนื้อหาจากแต่ละแท็บย่อยที่เลือก (เช่น ข้อมูลส่วนตัว, ข้อมูลการจ้างงาน ฯลฯ)

**หมายเหตุ:** หน้านี้เป็น container หลักที่โหลดแท็บย่อยแต่ละหน้า สิทธิ์การแก้ไขในแต่ละแท็บขึ้นอยู่กับ role ของผู้ใช้

---

## ข้อมูลส่วนตัว (`personal-info`)

**หน้าที่หลัก:** แสดงและจัดการข้อมูลส่วนตัวของพนักงาน ครอบคลุมข้อมูลพื้นฐาน ข้อมูลติดต่อ ที่อยู่ ผู้ติดต่อฉุกเฉิน ผู้พึ่งพิง และใบอนุญาตทำงาน

**ใครใช้ได้บ้าง:** พนักงาน (แก้ไขข้อมูลได้บางส่วน), เจ้าหน้าที่ HR (แก้ไขข้อมูลส่วนใหญ่), ผู้จัดการ HR (แก้ไขได้ทั้งหมด)

**สิ่งที่ทำได้:**
- **พนักงาน** แก้ไขข้อมูลติดต่อส่วนตัวได้โดยตรง (อีเมลส่วนตัว, เบอร์มือถือ, เบอร์บ้าน) โดยไม่ต้องขออนุมัติ
- **พนักงาน** เพิ่ม แก้ไข หรือลบผู้ติดต่อฉุกเฉินได้ด้วยตัวเอง
- **พนักงาน** เพิ่ม แก้ไข หรือลบข้อมูลผู้พึ่งพิง (คู่สมรส บุตร ฯลฯ) ได้
- **พนักงาน** แก้ไขที่อยู่ได้ (ต้องผ่านการอนุมัติ พร้อมแนบเอกสารยืนยันที่อยู่)
- **เจ้าหน้าที่ HR / ผู้จัดการ HR** แก้ไขข้อมูลพื้นฐาน เช่น ชื่อ-นามสกุล, วันเกิด, สัญชาติ, สถานะสมรส
- **เจ้าหน้าที่ HR / ผู้จัดการ HR** แก้ไขข้อมูลเพิ่มเติม เช่น ศาสนา กรุ๊ปเลือด สถานะทางทหาร (เฉพาะผู้ชายสัญชาติไทย) ข้อมูลวีซ่า (เฉพาะชาวต่างชาติ)
- **เจ้าหน้าที่ HR / ผู้จัดการ HR** แก้ไขข้อมูลใบอนุญาตทำงาน พร้อมอัปโหลดไฟล์เอกสาร

**ข้อมูลที่แสดง:**
- ข้อมูลพื้นฐาน: คำนำหน้าชื่อ (ไทย/อังกฤษ), ชื่อ-นามสกุล (ไทย/อังกฤษ), ชื่อเล่น, เพศ, วันเกิด, สัญชาติ, เลขบัตรประชาชน (ปกปิดบางส่วน), สถานะสมรส
- ข้อมูลเพิ่มเติม: ศาสนา กรุ๊ปเลือด สถานะทางทหาร (ถ้าเป็นผู้ชายสัญชาติไทย) ข้อมูลวีซ่า (ถ้าเป็นชาวต่างชาติ)
- ข้อมูลติดต่อ: อีเมลงาน, อีเมลส่วนตัว, เบอร์โทรงาน, เบอร์มือถือ, เบอร์บ้าน
- ที่อยู่ปัจจุบันและที่อยู่ตามทะเบียนบ้าน พร้อมวันที่มีผล
- รายชื่อผู้ติดต่อฉุกเฉิน: ชื่อ, ความสัมพันธ์, เบอร์ติดต่อ, ระบุว่าเป็นผู้ติดต่อหลักหรือไม่
- รายชื่อผู้พึ่งพิง: ชื่อ, ความสัมพันธ์, วันเกิด, เพศ
- ใบอนุญาตทำงาน (สำหรับชาวต่างชาติ): เลขที่ใบอนุญาต, ประเภท, วันออก, วันหมดอายุ (พร้อมแจ้งเตือนถ้าใกล้หมดอายุ หรือหมดอายุแล้ว), หน่วยงานออกใบอนุญาต, ดาวน์โหลดเอกสาร
- ประวัติการเปลี่ยนแปลงในแต่ละส่วน (ดูได้ผ่านปุ่ม "ประวัติ")

**หมายเหตุ:** การเปลี่ยนชื่อ-นามสกุล, เลขบัตรประชาชน, วันเกิด, สัญชาติ และที่อยู่ ต้องผ่านกระบวนการอนุมัติ (workflow) ก่อนจึงจะมีผล การแก้ไขข้อมูลติดต่อส่วนตัวและผู้ติดต่อฉุกเฉินไม่ต้องขออนุมัติ

---

## สลิปเงินเดือน (`payslip`)

**หน้าที่หลัก:** ให้พนักงานดูและดาวน์โหลดสลิปเงินเดือนและเอกสารภาษีของตัวเองได้โดยตรง

**ใครใช้ได้บ้าง:** พนักงาน (ดูและดาวน์โหลดของตัวเอง)

**สิ่งที่ทำได้:**
- ดูรายการสลิปเงินเดือนทั้งหมด (แสดงเป็นตาราง)
- คลิกดูรายละเอียดสลิปแต่ละเดือน
- ดาวน์โหลดสลิปเงินเดือนเป็นไฟล์ PDF
- กรองสลิปตามปีที่ต้องการ
- เปิด/ปิดการแสดงยอดเงิน (ซ่อนตัวเลขไว้เป็นค่าเริ่มต้นเพื่อความเป็นส่วนตัว โดยต้องกดยืนยันก่อนแสดง)
- ดูเอกสารภาษีประจำปี เช่น หนังสือรับรองการหักภาษี ณ ที่จ่าย, เอกสารประกันสังคม, เอกสารกองทุนสำรองเลี้ยงชีพ
- ดาวน์โหลดเอกสารภาษีเป็นไฟล์ PDF

**ข้อมูลที่แสดง:**
- รายการสลิปเงินเดือน: งวดเงินเดือน, วันที่จ่าย, ยอดรวมก่อนหัก (Gross Pay), ยอดสุทธิ (Net Pay)
- รายละเอียดสลิปแต่ละฉบับ:
  - รายรับ: เงินเดือนพื้นฐาน, เบี้ยตำแหน่ง, ค่าครองชีพ, ค่าล่วงเวลา, รายรับอื่นๆ
  - รายหัก: ภาษีเงินได้, ประกันสังคม, กองทุนสำรองเลี้ยงชีพ, เงินกู้, รายหักอื่นๆ
  - ยอดสุทธิ
  - ยอดสะสม YTD (Year-to-Date): รายรับสะสม, ภาษีสะสม, ประกันสังคมสะสม, กองทุนสะสม
- รายการเอกสารภาษี จัดกลุ่มตามปี พร้อมวันที่ออกเอกสาร

**หมายเหตุ:** ระบบบันทึก Audit Log ทุกครั้งที่พนักงานเปิดดูยอดเงิน เพื่อความปลอดภัยและการตรวจสอบ การดาวน์โหลดเอกสารภาษีมีข้อความแจ้งเตือนเรื่อง Audit อยู่ด้วย

---

## การลา (`leave-request`)

**หน้าที่หลัก:** ให้พนักงานยื่นขอลา ดูยอดวันลาคงเหลือ ติดตามสถานะคำขอ และดูปฏิทินการลา

**ใครใช้ได้บ้าง:** พนักงาน (ยื่นขอลาของตัวเอง), ผู้จัดการ (ดูปฏิทินการลาของทีมเพิ่มเติมได้)

**สิ่งที่ทำได้:**
- ดูยอดวันลาคงเหลือในแต่ละประเภทการลา พร้อม progress bar แสดงสัดส่วนที่ใช้ไป
- ยื่นคำขอลาใหม่ โดยระบุ: ประเภทการลา, วันที่เริ่ม-สิ้นสุด, ลาครึ่งวัน (เช้า/บ่าย), เหตุผล, ผู้รับมอบหมายงาน, เอกสารแนบ
- แนบใบรับรองแพทย์ (กรณีลาป่วยตั้งแต่ 3 วันขึ้นไป ระบบจะแจ้งเตือนให้แนบเอกสาร)
- ดูจำนวนวันทำงานที่ขอลาโดยอัตโนมัติ (นับเฉพาะวันทำงาน ไม่รวมเสาร์-อาทิตย์)
- กดยื่นคำขอลาผ่านปุ่มยืนยัน
- ดูประวัติคำขอลาทั้งหมด พร้อมกรองตามสถานะ (รออนุมัติ / อนุมัติแล้ว / ถูกปฏิเสธ)
- ยกเลิกคำขอลาที่ยังรออนุมัติ
- ดูรายละเอียดของคำขอลาแต่ละรายการ รวมถึงชื่อผู้อนุมัติ
- ดูปฏิทินการลาของตัวเอง (แสดงเฉพาะที่อนุมัติแล้วและรออนุมัติ)
- **ผู้จัดการ** สามารถเปิดดูปฏิทินการลาของทีมทั้งหมดได้

**ข้อมูลที่แสดง:**
- การ์ดยอดวันลาแต่ละประเภท: วันลาที่ได้รับสิทธิ์, ใช้ไปแล้ว, รออนุมัติ, คงเหลือ, วันที่หมดอายุ (ถ้ามี), วันยกยอด (ถ้ามี)
- ประเภทการลาที่รองรับ: ลาพักร้อน, ลาป่วย, ลากิจ, ลาคลอด, ลาดูแลบุตร, ลาบวช, ลาไปรับราชการทหาร, ลาชดเชย
- แบบฟอร์มขอลาพร้อมระบบคำนวณวันลาอัตโนมัติ และแจ้งเตือนเมื่อวันลาเกินสิทธิ์ หรือต้องขอ HR อนุมัติเพิ่มเติม (กรณีลาเกิน 5 วัน)
- ประวัติคำขอลา: ประเภทลา, ช่วงวัน, จำนวนวัน, วันที่ยื่น, สถานะ, ชื่อผู้อนุมัติและวันที่อนุมัติ
- ปฏิทินแสดงช่วงวันลา

**หมายเหตุ:** คำขอลาทุกรายการต้องผ่านการอนุมัติจากผู้จัดการ การลาเกิน 5 วันจะมีข้อความแจ้งเตือนว่าต้องให้ HR อนุมัติเพิ่มด้วย ระบบตรวจสอบยอดวันลาคงเหลือก่อนยื่นคำขอ

---

## โอทีและทำงานล่วงเวลา (`overtime`)

**หน้าที่หลัก:** ให้พนักงานยื่นขออนุมัติ OT ดูสรุปชั่วโมง OT ประจำเดือน ติดตามสถานะคำขอ และดูรายงานสะสมประจำปี โดยระบบออกแบบให้สอดคล้องกับกฎหมายแรงงานไทย

**ใครใช้ได้บ้าง:** พนักงาน (ยื่นขอ OT ของตัวเอง), ผู้จัดการ (ดูข้อมูลเพิ่มเติมได้)

**สิ่งที่ทำได้:**
- ดูสรุป OT ประจำเดือนปัจจุบัน (ชั่วโมงรวม, ยอดเงิน, จำนวนคำขอรออนุมัติ / อนุมัติแล้ว)
- ดูอัตราค่า OT แต่ละประเภท (วันธรรมดา, วันหยุดสัปดาห์, วันหยุดนักขัตฤกษ์ ในรูปแบบ เช่น 1.5x, 2x, 3x)
- ยื่นคำขอ OT ใหม่ โดยระบุ: วันที่, เวลาเริ่ม-สิ้นสุด, หมวดเหตุผล, รายละเอียดเหตุผล, รายละเอียดงานที่จะทำ, เอกสารแนบ, และสถานะขออนุมัติล่วงหน้าหรือไม่
- ระบบตรวจจับประเภท OT โดยอัตโนมัติจากวันที่ที่เลือก (วันธรรมดา/วันหยุดสัปดาห์/วันหยุดนักขัตฤกษ์)
- ระบบคำนวณจำนวนชั่วโมงและประมาณการยอดเงิน OT โดยอัตโนมัติ (รวมค่าทำงานกลางคืน 22:00-06:00 ถ้ามี)
- กดยื่นคำขอ OT ผ่านปุ่มยืนยัน
- ดูประวัติคำขอ OT ทั้งหมด พร้อมกรองตามสถานะและประเภท
- ยกเลิกคำขอ OT ที่ยังรออนุมัติ
- ยืนยันชั่วโมง OT จริง (Post-confirmation) หลังจาก OT ได้รับอนุมัติแล้ว เพื่อบันทึกชั่วโมงที่ทำงานจริง
- ดูรายงาน OT ประจำปี: รวมชั่วโมง, รวมเงิน, จำแนกตามประเภท OT, แผนภูมิรายเดือน

**ข้อมูลที่แสดง:**
- แถบแจ้งเตือนการใช้ OT ในสัปดาห์ปัจจุบัน เทียบกับขีดจำกัด 36 ชั่วโมงต่อสัปดาห์ (ตามกฎหมายแรงงานไทย) แสดงเป็นสีเหลือง/แดง เมื่อใกล้/เกินกว่า 75% ของขีดจำกัด
- ข้อมูลกฎหมายแรงงาน: OT สูงสุด 36 ชั่วโมงต่อสัปดาห์, ชั่วโมงทำงานปกติ 8 ชั่วโมงต่อวัน, เวลาพักขั้นต่ำ
- แบบฟอร์มขอ OT พร้อมแสดงชั่วโมงรวมและยอดเงินประมาณการแบบ real-time
- รายการคำขอ OT แต่ละรายการ: วันที่, ประเภท OT, อัตรา, ช่วงเวลา, ชั่วโมง, ยอดเงิน, สถานะ, ผู้อนุมัติ (ถ้าอนุมัติแล้ว), เหตุผลที่ปฏิเสธ (ถ้าถูกปฏิเสธ)
- รายงานประจำปี: ยอดรวมชั่วโมงและเงิน OT, สัดส่วนตามประเภท OT, กราฟแท่งรายเดือน, งบประมาณ OT ของแผนกและยอดที่ใช้ไป

**หมายเหตุ:** ระบบบังคับใช้ขีดจำกัด OT สูงสุด 36 ชั่วโมงต่อสัปดาห์ตามกฎหมายแรงงานไทย หากเกินขีดจำกัดจะไม่สามารถยื่นคำขอได้ คำขอ OT ทุกรายการต้องผ่านการอนุมัติจากผู้จัดการ หลังทำ OT เสร็จสิ้น พนักงานต้องยืนยันชั่วโมงจริงผ่านขั้นตอน Post-confirmation ก่อนที่ระบบจะบันทึกยอด OT สุดท้าย
